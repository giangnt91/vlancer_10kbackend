<!-- BEGIN BASE-->
<div id="base">
    <!-- BEGIN CONTENT-->
    <div id="content">
        <section>
            <div class="section-body">
                <div class="row">

                    <!-- BEGIN ALERT - REVENUE -->
                    <div class="col-md-2 col-sm-6">
                        <div class="card">
                            <div class="card-body no-padding">
                                <div class="alert alert-callout alert-danger no-margin ink-reaction" ng-click="go_c_coupon()">
                                    <strong class="text-danger text-xl">
                                        <i class="md md-border-color"></i>
                                        <span>Tạo</span>
                                    </strong>
                                    <br/>
                                    <span class="opacity-50">Tạo Coupon Mới</span>
                                    <div class="stick-bottom-left-right">
                                        <div class="height-2 sparkline-revenue" data-line-color="#bdc1c1"></div>
                                    </div>
                                </div>
                            </div>
                            <!--end .card-body -->
                        </div>
                        <!--end .card -->
                    </div>
                    <!--end .col -->

                    <!-- BEGIN ALERT - REVENUE -->
                    <div class="col-md-2 col-sm-6">
                        <div class="card">
                            <div class="card-body no-padding">
                                <div class="alert alert-callout alert-info no-margin ink-reaction">
                                    <strong class="text-success text-xl">
                                        <i class="md md-details"></i>
                                        <span>{{all_coupon.server[0].coupon.length + all_coupon.shop[0].coupon.length + all_coupon.shop_use_coupon.length
                                            + all_coupon.user_get_coupon.length + expire_coupon.length}}</span>
                                    </strong>
                                    <br/>
                                    <span class="opacity-50">Tổng Số Coupon</span>
                                    <div class="stick-bottom-left-right">
                                        <div class="height-2 sparkline-revenue" data-line-color="#bdc1c1"></div>
                                    </div>
                                </div>
                            </div>
                            <!--end .card-body -->
                        </div>
                        <!--end .card -->
                    </div>
                    <!--end .col -->
                    <!-- END ALERT - REVENUE -->

                    <!-- BEGIN ALERT - VISITS -->
                    <div class="col-md-2 col-sm-6">
                        <div class="card">
                            <div class="card-body no-padding">
                                <div class="alert alert-callout alert-warning no-margin ink-reaction">
                                    <strong class="text-warning text-xl">
                                        <i class="md md-grade"></i>
                                        {{all_coupon.server[0].coupon.length}}
                                    </strong>
                                    <br/>
                                    <span class="opacity-50">Coupon Server Tạo</span>
                                    <div class="stick-bottom-right">
                                        <div class="height-1 sparkline-visits" data-bar-color="#e5e6e6"></div>
                                    </div>
                                </div>
                            </div>
                            <!--end .card-body -->
                        </div>
                        <!--end .card -->
                    </div>
                    <!--end .col -->
                    <!-- END ALERT - VISITS -->

                    <!-- BEGIN ALERT - BOUNCE RATES -->
                    <div class="col-md-2 col-sm-6">
                        <div class="card">
                            <div class="card-body no-padding">
                                <div class="alert alert-callout alert-info no-margin ink-reaction">
                                    <strong class="text-info text-xl">
                                        <i class="md md-shop"></i>
                                        {{all_coupon.shop[0].coupon.length}}
                                    </strong>
                                    <br/>
                                    <span class="opacity-50">Coupon Shop Tạo</span>
                                </div>
                            </div>
                            <!--end .card-body -->
                        </div>
                        <!--end .card -->
                    </div>
                    <!--end .col -->
                    <!-- END ALERT - BOUNCE RATES -->

                    <!-- BEGIN ALERT - TIME ON SITE -->
                    <div class="col-md-2 col-sm-6">
                        <div class="card">
                            <div class="card-body no-padding">
                                <div class="alert alert-callout alert-success no-margin ink-reaction">
                                    <strong class="text-success text-xl">
                                        <i class="md md-verified-user"></i>
                                        {{all_coupon.shop_use_coupon.length}}
                                    </strong>
                                    <br/>
                                    <span class="opacity-50">Coupon Shop Sử Dụng</span>
                                </div>
                            </div>
                            <!--end .card-body -->
                        </div>
                        <!--end .card -->
                    </div>
                    <!--end .col -->
                    <!-- END ALERT - TIME ON SITE -->

                    <!-- BEGIN ALERT - TIME ON SITE -->
                    <div class="col-md-2 col-sm-6">
                        <div class="card">
                            <div class="card-body no-padding">
                                <div class="alert alert-callout alert-warning no-margin ink-reaction">
                                    <strong class="text-warning text-xl">
                                        <i class="md md-add-shopping-cart"></i>
                                        {{all_coupon.user_get_coupon.length}}
                                    </strong>
                                    <br/>
                                    <span class="opacity-50">Coupon Đã Được Lấy</span>
                                </div>
                            </div>
                            <!--end .card-body -->
                        </div>
                        <!--end .card -->
                    </div>
                    <!--end .col -->
                    <!-- END ALERT - TIME ON SITE -->
                </div>


                <div class="row">
                    <div class="col-md-12 col-sm-12">
                        <div class="col-lg-12">
                            <div class="table-responsive  alert alert-callout no-margin tbaction" style="overflow-x:unset;">
                                <h2 ng-if="new_coupon.length === 0" class="text-center">Không có dữ liệu</h2>
                                <table datatable="" ng-if="new_coupon.length > 0" dt-options="dtOptions" class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Shop</th>
                                            <th>Thông Tin </th>
                                            <th>Ngày Phát Hành</th>
                                            <th>Ngày Hết Hạng</th>
                                            <th>Giá Trị</th>
                                            <th>Hạng Thành Viên</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="content in new_coupon | orderBy:'-_id'">
                                            <td>{{content.coupon[0].the_issuer[0].name}}</td>
                                            <td>{{content.coupon[0].coupon_info}}</td>
                                            <td>{{content.coupon[0].release_day}}</td>
                                            <td><span ng-if="content.coupon[0].time_expire !== '1'">{{content.coupon[0].time_expire}} Tháng</span> <span ng-if="content.coupon[0].time_expire === '1'">{{content.coupon[0].time_expire}} Năm</span></td>
                                            <td>{{content.coupon[0].value}}</td>
                                            <td>{{content.coupon[0].class_user[0].name}}</td>
                                            <td class="text-center">
                                                <button type="button" class="btn btn-danger ink-reaction" data-toggle="modal" data-target="#cancel" ng-click="get_id_coupon(content.coupon[0]._id)">
                                                    <i class="md md-cancel"></i>
                                                </button>
                                                <button type="button" class="btn btn-primary ink-reaction" data-toggle="modal" data-target="#accept" ng-click="get_id_coupon(content.coupon[0]._id)">
                                                    <i class="md md-check"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!--end .table-responsive -->
                            <!-- END DATATABLE 1 -->
                        </div>
                    </div>
                </div>
        </section>
        </div>
    </div>

    <!-- accept -->
    <div id="accept" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
                    <h4 class="modal-title">Coupon Mới</h4>
                </div>
                <div class="modal-body">
                    <p ng-show="!accept">Bạn có chắc chắn muốn duyệt coupon của
                        <strong class="text-primary">{{detail.the_issuer[0].name}}</strong> ?</p>
                    <p ng-show="accept">Coupon của
                        <strong class="text-primary">{{detail.the_issuer[0].name}}</strong> đã được duyệt thành công</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="set_is_accept()">Đóng</button>
                    <button type="button" class="btn btn-primary" ng-show="!accept" ng-click="a_coupon()">
                        Chấp Nhận
                    </button>
                </div>
            </div>

        </div>
    </div>

    <!-- cancel -->
    <div id="cancel" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
                    <h4 class="modal-title">Hủy Coupon</h4>
                </div>
                <div class="modal-body">
                    <p ng-show="!cancel">Bạn có chắc chắn muốn hủy coupon của
                        <strong class="text-primary">{{detail.the_issuer[0].name}}</strong> ?</p>
                    <p ng-show="cancel">Coupon của
                        <strong class="text-primary">{{detail.the_issuer[0].name}}</strong> đã được hủy.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="set_is_cancel()">Đóng</button>
                    <button type="button" class="btn btn-danger" ng-show="!cancel" ng-click="c_coupon()">
                        Chấp Nhận
                    </button>
                </div>
            </div>

        </div>
    </div>